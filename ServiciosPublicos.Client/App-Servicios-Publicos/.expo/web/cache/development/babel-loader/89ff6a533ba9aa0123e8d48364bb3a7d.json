{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\geraa\\\\Desktop\\\\App-Servicios-Publicos\\\\components\\\\NewReportLocation.js\";\n\nimport React, { useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport LocationForm from \"../components/LocationForm\";\nimport MapComponent from \"../components/MapComponent\";\nimport * as Location from \"expo-location\";\nimport * as Permissions from \"expo-permissions\";\n\nvar _Dimensions$get = Dimensions.get(\"screen\"),\n    WIDTH = _Dimensions$get.width,\n    HEIGHT = _Dimensions$get.height;\n\nvar NewReportLocation = function NewReportLocation(_ref) {\n  var parentCallback = _ref.parentCallback,\n      currentLocation = _ref.currentLocation,\n      currentAddress = _ref.currentAddress;\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      screen = _useState2[0],\n      setScreen = _useState2[1];\n\n  var _useState3 = useState(currentLocation),\n      _useState4 = _slicedToArray(_useState3, 2),\n      address = _useState4[0],\n      setAddress = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      location = _useState6[0],\n      setLocation = _useState6[1];\n\n  var _useState7 = useState(Object.keys(currentLocation).length === 0 ? false : true),\n      _useState8 = _slicedToArray(_useState7, 2),\n      exist = _useState8[0],\n      setExist = _useState8[1];\n\n  var _useState9 = useState(currentAddress),\n      _useState10 = _slicedToArray(_useState9, 2),\n      optionalAddress = _useState10[0],\n      setOptionalAddress = _useState10[1];\n\n  var sendData = function sendData() {\n    parentCallback(3, address, optionalAddress);\n  };\n\n  var callbackFunction = function callbackFunction(childData) {\n    if (childData === 1) {\n      setScreen(childData);\n      setAddress(null);\n      setLocation(\"\");\n    } else {\n        getCurrentLocation();\n      }\n  };\n\n  var callbackAddress = function callbackAddress(childData) {\n    setAddress(childData);\n    console.log(childData);\n    ReverseGeocode(childData);\n    setExist(true);\n  };\n\n  var callbackOptionalAddress = function callbackOptionalAddress(childData) {\n    setOptionalAddress(childData);\n  };\n\n  var locationForm = React.createElement(LocationForm, {\n    parentCallback: callbackFunction,\n    locationAdded: exist,\n    optionalAddressForm: callbackOptionalAddress,\n    dataForm: optionalAddress,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  });\n  var mapComponent = React.createElement(MapComponent, {\n    parentCallback: callbackAddress,\n    parentLocation: address,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 5\n    }\n  });\n  var addressText = React.createElement(Text, {\n    style: styles.instructionText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, location);\n  var instructionText = React.createElement(Text, {\n    style: styles.instructionText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, \"Pulsa la ubicacion exacta en el mapa\");\n  var nextButton = React.createElement(TouchableOpacity, {\n    style: styles.nextButton,\n    onPress: sendData,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }, \"Siguiente\"));\n  var acceptButton = React.createElement(TouchableOpacity, {\n    style: styles.nextButton,\n    onPress: function onPress() {\n      return setScreen(2);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.buttonText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }, \"Aceptar\"));\n\n  var ReverseGeocode = function ReverseGeocode(ad) {\n    var _await$Permissions$as, granted, data;\n\n    return _regeneratorRuntime.async(function ReverseGeocode$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.LOCATION));\n\n          case 2:\n            _await$Permissions$as = _context.sent;\n            granted = _await$Permissions$as.granted;\n\n            if (!granted) {\n              _context.next = 12;\n              break;\n            }\n\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(Location.reverseGeocodeAsync({\n              latitude: ad.latitude,\n              longitude: ad.longitude\n            }));\n\n          case 7:\n            data = _context.sent;\n            console.log(data);\n            setLocation(data[0].street + \" #\" + data[0].name + \", \" + data[0].district + \" CP. \" + data[0].postalCode);\n            _context.next = 13;\n            break;\n\n          case 12:\n            console.log(\"Necesitas dar permiso\");\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getCurrentLocation = function getCurrentLocation() {\n    var _await$Permissions$as2, granted, data;\n\n    return _regeneratorRuntime.async(function getCurrentLocation$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(Permissions.askAsync(Permissions.LOCATION));\n\n          case 2:\n            _await$Permissions$as2 = _context2.sent;\n            granted = _await$Permissions$as2.granted;\n\n            if (!granted) {\n              _context2.next = 14;\n              break;\n            }\n\n            _context2.next = 7;\n            return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync());\n\n          case 7:\n            data = _context2.sent;\n            console.log(data.coords);\n            setAddress(data.coords);\n            setScreen(1);\n            setExist(true);\n            _context2.next = 15;\n            break;\n\n          case 14:\n            console.log(\"Necesitas dar permiso\");\n\n          case 15:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.cardHeader,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.headerText,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, \"Ubicaci\\xF3n del reporte\")), React.createElement(View, {\n    style: styles.cardContent,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }\n  }, screen === 1 ? address !== null ? addressText : instructionText : null, screen === 0 || screen === 2 ? locationForm : mapComponent), React.createElement(View, {\n    style: styles.cardFooter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, exist && (screen === 0 || screen === 2) ? nextButton : null, screen === 1 && location !== \"\" ? acceptButton : null));\n};\n\nexport default NewReportLocation;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"stretch\",\n    justifyContent: \"center\",\n    width: \"100%\",\n    borderRadius: 10\n  },\n  cardHeader: {\n    flex: 2,\n    alignItems: \"center\",\n    justifyContent: \"space-evenly\",\n    flexDirection: \"row\",\n    marginBottom: 2,\n    backgroundColor: \"white\",\n    borderTopLeftRadius: 10,\n    borderTopRightRadius: 10\n  },\n  cardContent: {\n    flex: 20,\n    alignItems: \"stretch\",\n    justifyContent: \"center\",\n    backgroundColor: \"white\"\n  },\n  cardFooter: {\n    flex: 3,\n    alignItems: \"center\",\n    justifyContent: \"flex-end\",\n    flexDirection: \"row\",\n    marginTop: 2,\n    backgroundColor: \"white\",\n    borderBottomLeftRadius: 10,\n    borderBottomRightRadius: 10\n  },\n  headerText: {\n    fontSize: HEIGHT * 0.022,\n    fontWeight: \"bold\"\n  },\n  buttonText: {\n    fontSize: HEIGHT * 0.02,\n    alignSelf: \"center\",\n    color: \"white\"\n  },\n  instructionText: {\n    fontSize: HEIGHT * 0.018,\n    alignSelf: \"center\",\n    color: \"black\",\n    marginVertical: HEIGHT * 0.02,\n    textAlign: \"center\"\n  },\n  nextButton: {\n    backgroundColor: \"rgba(0,158,227,1)\",\n    width: \"25%\",\n    height: HEIGHT * 0.048,\n    borderRadius: 5,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginRight: WIDTH * 0.02\n  }\n});","map":{"version":3,"sources":["C:/Users/geraa/Desktop/App-Servicios-Publicos/components/NewReportLocation.js"],"names":["React","useState","LocationForm","MapComponent","Location","Permissions","Dimensions","get","WIDTH","width","HEIGHT","height","NewReportLocation","parentCallback","currentLocation","currentAddress","screen","setScreen","address","setAddress","location","setLocation","Object","keys","length","exist","setExist","optionalAddress","setOptionalAddress","sendData","callbackFunction","childData","getCurrentLocation","callbackAddress","console","log","ReverseGeocode","callbackOptionalAddress","locationForm","mapComponent","addressText","styles","instructionText","nextButton","buttonText","acceptButton","ad","askAsync","LOCATION","granted","reverseGeocodeAsync","latitude","longitude","data","street","name","district","postalCode","getCurrentPositionAsync","coords","container","cardHeader","headerText","cardContent","cardFooter","StyleSheet","create","flex","alignItems","justifyContent","borderRadius","flexDirection","marginBottom","backgroundColor","borderTopLeftRadius","borderTopRightRadius","marginTop","borderBottomLeftRadius","borderBottomRightRadius","fontSize","fontWeight","alignSelf","color","marginVertical","textAlign","marginRight"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  View,\r\n  Text,\r\n  Dimensions,\r\n  TouchableOpacity,\r\n} from \"react-native\";\r\nimport LocationForm from \"../components/LocationForm\";\r\nimport MapComponent from \"../components/MapComponent\";\r\nimport * as Location from \"expo-location\";\r\nimport * as Permissions from \"expo-permissions\";\r\n\r\nconst { width: WIDTH, height: HEIGHT } = Dimensions.get(\"screen\");\r\n\r\nconst NewReportLocation = ({\r\n  parentCallback,\r\n  currentLocation,\r\n  currentAddress,\r\n}) => {\r\n  const [screen, setScreen] = useState(0);\r\n  const [address, setAddress] = useState(currentLocation);\r\n  const [location, setLocation] = useState(\"\");\r\n  const [exist, setExist] = useState(\r\n    Object.keys(currentLocation).length === 0 ? false : true\r\n  );\r\n  let [optionalAddress, setOptionalAddress] = useState(currentAddress);\r\n\r\n  const sendData = () => {\r\n    parentCallback(3, address, optionalAddress);\r\n  };\r\n\r\n  const callbackFunction = (childData) => {\r\n    if (childData === 1) {\r\n      setScreen(childData);\r\n      setAddress(null);\r\n      setLocation(\"\");\r\n    } //27.518302, -109.9502619\r\n    else {\r\n      getCurrentLocation();\r\n    }\r\n  };\r\n\r\n  const callbackAddress = (childData) => {\r\n    setAddress(childData);\r\n    console.log(childData);\r\n    ReverseGeocode(childData);\r\n    setExist(true);\r\n  };\r\n\r\n  const callbackOptionalAddress = (childData) => {\r\n    setOptionalAddress(childData);\r\n  };\r\n\r\n  let locationForm = (\r\n    <LocationForm\r\n      parentCallback={callbackFunction}\r\n      locationAdded={exist}\r\n      optionalAddressForm={callbackOptionalAddress}\r\n      dataForm={optionalAddress}\r\n    />\r\n  );\r\n  let mapComponent = (\r\n    <MapComponent parentCallback={callbackAddress} parentLocation={address} />\r\n  );\r\n  let addressText = <Text style={styles.instructionText}>{location}</Text>;\r\n  let instructionText = (\r\n    <Text style={styles.instructionText}>\r\n      Pulsa la ubicacion exacta en el mapa\r\n    </Text>\r\n  );\r\n  let nextButton = (\r\n    <TouchableOpacity style={styles.nextButton} onPress={sendData}>\r\n      <Text style={styles.buttonText}>Siguiente</Text>\r\n    </TouchableOpacity>\r\n  );\r\n  let acceptButton = (\r\n    <TouchableOpacity style={styles.nextButton} onPress={() => setScreen(2)}>\r\n      <Text style={styles.buttonText}>Aceptar</Text>\r\n    </TouchableOpacity>\r\n  );\r\n\r\n  let ReverseGeocode = async (ad) => {\r\n    const { granted } = await Permissions.askAsync(Permissions.LOCATION);\r\n    if (granted) {\r\n      let data = await Location.reverseGeocodeAsync({\r\n        latitude: ad.latitude,\r\n        longitude: ad.longitude,\r\n      });\r\n      console.log(data);\r\n      setLocation(\r\n        data[0].street +\r\n          \" #\" +\r\n          data[0].name +\r\n          \", \" +\r\n          data[0].district +\r\n          \" CP. \" +\r\n          data[0].postalCode\r\n      );\r\n    } else {\r\n      console.log(\"Necesitas dar permiso\");\r\n    }\r\n  };\r\n\r\n  let getCurrentLocation = async () => {\r\n    const { granted } = await Permissions.askAsync(Permissions.LOCATION);\r\n    if (granted) {\r\n      let data = await Location.getCurrentPositionAsync();\r\n      console.log(data.coords);\r\n      setAddress(data.coords);\r\n      setScreen(1);\r\n      setExist(true);\r\n    } else {\r\n      console.log(\"Necesitas dar permiso\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.cardHeader}>\r\n        <Text style={styles.headerText}>Ubicaci√≥n del reporte</Text>\r\n      </View>\r\n\r\n      <View style={styles.cardContent}>\r\n        {screen === 1\r\n          ? address !== null\r\n            ? addressText\r\n            : instructionText\r\n          : null}\r\n\r\n        {screen === 0 || screen === 2 ? locationForm : mapComponent}\r\n      </View>\r\n\r\n      <View style={styles.cardFooter}>\r\n        {exist && (screen === 0 || screen === 2) ? nextButton : null}\r\n        {screen === 1 && location !== \"\" ? acceptButton : null}\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nexport default NewReportLocation;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"stretch\",\r\n    justifyContent: \"center\",\r\n    width: \"100%\",\r\n    borderRadius: 10,\r\n  },\r\n  cardHeader: {\r\n    flex: 2,\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-evenly\",\r\n    flexDirection: \"row\",\r\n    marginBottom: 2,\r\n    backgroundColor: \"white\",\r\n    borderTopLeftRadius: 10,\r\n    borderTopRightRadius: 10,\r\n  },\r\n  cardContent: {\r\n    flex: 20,\r\n    alignItems: \"stretch\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"white\",\r\n  },\r\n  cardFooter: {\r\n    flex: 3,\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\",\r\n    flexDirection: \"row\",\r\n    marginTop: 2,\r\n    backgroundColor: \"white\",\r\n    borderBottomLeftRadius: 10,\r\n    borderBottomRightRadius: 10,\r\n  },\r\n  headerText: {\r\n    fontSize: HEIGHT * 0.022,\r\n    fontWeight: \"bold\",\r\n  },\r\n  buttonText: {\r\n    fontSize: HEIGHT * 0.02,\r\n    alignSelf: \"center\",\r\n    color: \"white\",\r\n  },\r\n  instructionText: {\r\n    fontSize: HEIGHT * 0.018,\r\n    alignSelf: \"center\",\r\n    color: \"black\",\r\n    marginVertical: HEIGHT * 0.02,\r\n    textAlign: \"center\",\r\n  },\r\n  nextButton: {\r\n    backgroundColor: \"rgba(0,158,227,1)\",\r\n    width: \"25%\",\r\n    height: HEIGHT * 0.048,\r\n    borderRadius: 5,\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    marginRight: WIDTH * 0.02,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}